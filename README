# todo
- doWork(): use the return value
- output is to small, there is something missing compared to hello example
  --help
  --version
- make clean; make (fix all warnings)
- check that the qt-fuse-example client meets all FUSE QA requirements
 - check all printf/cout/qDebug lines
 - check for errors when doing fuse function calls
 - [x] check that all required functions are called on shutdown
  
# what is this?
qt-fuse-example is a lightweight example for how to use FUSE and Qt together. 

# features
 * POSIX signal handling, so that CTRL+C from a shell can be used to shutdown the program gracefully
   - this is the primary reason why fuse_main(..) can't be used since we have to wiretapp the POSIX 
     signal handlers to make them available in the Qt context: 
        QFuse.cpp - QFuse::shutDown() is called when a POSIX signal arrives, doing a clean shutdown
 * FUSE runs in its own FUSE-eventloop (fuse_loop/fuse_loop_mt). either of the two loops, depending if '-s' is passed is
   started from a seperate QThread in QFuse.cpp, thus the Qt eventloop and the FUSE eventloop are isolated from each other
 * pressing CTRL+C will shutdown the FUSE-eventloop, unmounts the FS and cleanly exists qt-fuse-example
 * 'fusermount -u dst' also shutsdown the FUSE-eventloop and will also cleanly exit the qt-fuse-example
 * if 'dst' is still mounted, say after qt-fuse-example crashed, qt-fuse-example will unmount it automatically on program start
 * this implementation features the hello.c minimal read only FUSE FS coming with the fuse library source
   - there exists only one file called 'hello'
   - and it contains "Hello World!"
 * command line arguments are parsed using fuse_parse_cmdline(..)
 - '-s' single vs multithreaded
 - '-d' enabled/disable debug
 - '--help' and '--version' for more details on FUSE command line parameters

# dependencies
 * Qt 4.x
 * FUSE library 2.9.x

# how to compile
 * qmake
 * make
 
# how to use 

## start the software (from a shell)
  mkdir dst
  ./qt-fuse-example 

or

usage:
  ./qt-fuse-example --help  
example: 
  ./qt-fuse-example dst -d -s

## exit the daemon
on the shell you started qt-fuse-example from, hit:
 - hit CTRL+C 

or use:
 - kill `pidof qt-fuse-example`

both commands will shutdown qt-fuse-example gracefully.

in case it crashes, shoot the process with:
  kill -9 `pidof qt-fuse-example`

afterwards remote the mount:
  fusermount -u dst
 
# documentation
* http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/unix-signals.html
* https://code.google.com/p/fuse-examplefs/ 
* http://cinwell.wordpress.com/2012/02/07/how-fuse-works-lib-level/
 
# license
this codebase, respecting each subprojects license of course, is licensed - WTFPL â€“ Do What the Fuck You Want to Public License -> http://www.wtfpl.net/

 this repository consists of 3 merged code bases:
  - Qt hello world example 
    - main.cpp
  - Qt posix signals example 
    - main.cpp
  - FUSE hello.c example 
    - examplefs.hh, examplefs.cc
  - FUSE example from https://code.google.com/p/fuse-examplefs/ 
    - wrap.cc, wrap.hh
